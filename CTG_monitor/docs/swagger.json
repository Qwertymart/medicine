{
    "swagger": "2.0",
    "info": {
        "description": "Стандартная структура успешного ответа",
        "title": "CTG Monitor API",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "name": "API Support",
            "url": "http://www.swagger.io/support",
            "email": "support@swagger.io"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/monitoring/cleanup": {
            "post": {
                "description": "Выполняет очистку зависших и неактивных сессий в системе",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "monitoring"
                ],
                "summary": "Очистка зависших сессий",
                "responses": {
                    "200": {
                        "description": "Результат очистки",
                        "schema": {
                            "$ref": "#/definitions/handlers.CleanupResponse"
                        }
                    }
                }
            }
        },
        "/monitoring/health": {
            "get": {
                "description": "Возвращает информацию о текущем состоянии и работоспособности сервиса мониторинга КТГ",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "monitoring"
                ],
                "summary": "Проверка состояния сервиса",
                "responses": {
                    "200": {
                        "description": "Состояние сервиса",
                        "schema": {
                            "$ref": "#/definitions/handlers.HealthResponse"
                        }
                    }
                }
            }
        },
        "/sessions/start": {
            "post": {
                "description": "Создает новую сессию мониторинга КТГ для указанной медицинской карты и устройства",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Запуск новой сессии мониторинга КТГ",
                "parameters": [
                    {
                        "description": "Данные для создания сессии",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/handlers.SessionRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Сессия успешно запущена",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/handlers.SuccessResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/handlers.SessionResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Неверный формат данных",
                        "schema": {
                            "$ref": "#/definitions/handlers.ErrorResponse"
                        }
                    },
                    "409": {
                        "description": "Сессия для устройства уже активна",
                        "schema": {
                            "$ref": "#/definitions/handlers.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Внутренняя ошибка сервера",
                        "schema": {
                            "$ref": "#/definitions/handlers.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/sessions/stop/{session_id}": {
            "post": {
                "description": "Завершает указанную активную сессию мониторинга КТГ",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "sessions"
                ],
                "summary": "Завершение активной сессии мониторинга",
                "parameters": [
                    {
                        "type": "string",
                        "format": "uuid",
                        "description": "UUID сессии",
                        "name": "session_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Сессия успешно завершена",
                        "schema": {
                            "allOf": [
                                {
                                    "$ref": "#/definitions/handlers.SuccessResponse"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "$ref": "#/definitions/handlers.SessionResponse"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "400": {
                        "description": "Неверный ID сессии",
                        "schema": {
                            "$ref": "#/definitions/handlers.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Сессия не найдена",
                        "schema": {
                            "$ref": "#/definitions/handlers.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "handlers.CleanupResponse": {
            "description": "Результат операции очистки зависших сессий",
            "type": "object",
            "properties": {
                "active_sessions": {
                    "description": "Количество активных сессий после очистки",
                    "type": "integer",
                    "example": 2
                },
                "message": {
                    "description": "Сообщение о результате",
                    "type": "string",
                    "example": "Очистка сессий выполнена"
                }
            }
        },
        "handlers.ErrorResponse": {
            "description": "Стандартная структура ответа об ошибке",
            "type": "object",
            "properties": {
                "details": {
                    "description": "Дополнительные детали ошибки",
                    "type": "string",
                    "example": "field required"
                },
                "error": {
                    "description": "Описание ошибки",
                    "type": "string",
                    "example": "Неверный формат данных"
                }
            }
        },
        "handlers.HealthResponse": {
            "description": "Информация о состоянии и работоспособности сервиса",
            "type": "object",
            "properties": {
                "active_sessions": {
                    "description": "Количество активных сессий",
                    "type": "integer",
                    "example": 3
                },
                "service": {
                    "description": "Название сервиса",
                    "type": "string",
                    "example": "CTG Monitor"
                },
                "status": {
                    "description": "Статус сервиса",
                    "type": "string",
                    "example": "healthy"
                },
                "timestamp": {
                    "description": "Время проверки",
                    "type": "string",
                    "example": "2023-09-01T10:00:00Z"
                }
            }
        },
        "handlers.SessionRequest": {
            "description": "Данные для создания новой сессии мониторинга",
            "type": "object",
            "required": [
                "card_id",
                "device_id"
            ],
            "properties": {
                "card_id": {
                    "description": "UUID медицинской карты пациента",
                    "type": "string",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                },
                "device_id": {
                    "description": "Идентификатор устройства КТГ",
                    "type": "string",
                    "example": "CTG-DEVICE-001"
                }
            }
        },
        "handlers.SessionResponse": {
            "description": "Информация о сессии мониторинга КТГ",
            "type": "object",
            "properties": {
                "card_id": {
                    "description": "UUID медицинской карты",
                    "type": "string",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                },
                "device_id": {
                    "description": "Идентификатор устройства",
                    "type": "string",
                    "example": "CTG-DEVICE-001"
                },
                "duration": {
                    "description": "Продолжительность в секундах",
                    "type": "integer",
                    "example": 5400
                },
                "end_time": {
                    "description": "Время окончания сессии (если завершена)",
                    "type": "string",
                    "example": "2023-09-01T11:30:00Z"
                },
                "session_id": {
                    "description": "UUID сессии",
                    "type": "string",
                    "example": "550e8400-e29b-41d4-a716-446655440001"
                },
                "start_time": {
                    "description": "Время начала сессии",
                    "type": "string",
                    "example": "2023-09-01T10:00:00Z"
                },
                "status": {
                    "description": "Статус сессии",
                    "type": "string",
                    "enum": [
                        "active",
                        "stopped"
                    ],
                    "example": "active"
                }
            }
        },
        "handlers.SuccessResponse": {
            "description": "Стандартная структура успешного ответа",
            "type": "object",
            "properties": {
                "data": {
                    "description": "Дополнительные данные"
                },
                "message": {
                    "description": "Сообщение об успехе",
                    "type": "string",
                    "example": "Операция выполнена успешно"
                }
            }
        }
    },
    "tags": [
        {
            "description": "Управление сессиями мониторинга",
            "name": "sessions"
        },
        {
            "description": "Мониторинг состояния сервиса",
            "name": "monitoring"
        }
    ]
}